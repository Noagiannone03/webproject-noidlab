<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carousel avec effet Flip</title>
  <link href="https://fonts.cdnfonts.com/css/graffiti-font" rel="stylesheet" />
  <style>
    /* Réglages de base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #2c2b2b;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    /* SVG et texte animé */
    svg {
      position: absolute;
      top: 3%;
      left: 70%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: auto;
    }

    text {
      fill: url(#imagePattern);
      font-family: "Graffiti font", sans-serif;
      font-weight: bold;
      font-size: 45px;
      letter-spacing: 5px;
      stroke: rgb(130, 217, 252);
      stroke-width: 1px;
      stroke-dasharray: 500;
      stroke-dashoffset: 500;
      filter: url(#glowFilter);
    }

    /* Carousel et cartes */
    .carousel-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 850px;
      height: 400px;
      perspective: 1500px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .carousel {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 1s ease;
      transform: rotateY(0deg);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card {
      width: 200px;
      height: 300px;
      position: absolute;
      background-size: cover;
      background-position: center;
      color: white;
      font-size: 24px;
      font-weight: bold;
      display: flex;
      justify-content: center;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 1s ease;
      /* Nécessaire pour l'effet flip */
      perspective: 1000px;
    }

    /* Structure interne pour l'effet flip */
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 10px;
    }

    .card-front {
      background-size: cover;
      background-position: center;
    }

    .card-back {
      background: rgba(0, 0, 0, 0.8);
      color: white;
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 10px;
    }

    .content {
      border-radius: 5px;
    }

    /* Boutons de navigation */
    button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      font-size: 30px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.3s ease;
      z-index: 10;
    }

    button:hover {
      background-color: rgba(0, 0, 0, 0.8);
      color: limegreen;
    }

    .prev {
      left: 0;
      color: red;
    }

    .next {
      right: 0;
      color: red;
    }

    /* Lightbox */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .lightbox img {
      max-width: 90%;
      max-height: 80%;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }

    /* Réglages responsive */
    @media screen and (min-width: 600px) and (max-width: 1000px) {
      .carousel-container {
        width: 700px;
        height: 300px;
        transform: translate(-50%, -50%) scale(0.8);
      }

      .card {
        width: 160px;
        height: 240px;
        font-size: 20px;
      }

      .carousel {
        gap: 15px;
      }
    }

    @media screen and (max-width: 600px) {
      svg {
        top: 20%;
        left: 70%;
      }

      .carousel-container {
        width: 100%;
        height: 200px;
        transform: translate(-50%, -50%) scale(0.6);
      }

      .carousel {
        gap: 0px;
      }
    }
  </style>
</head>
<body>
  <!-- SVG pour le texte animé -->
  <svg viewBox="0 0 900 200">
    <defs>
      <pattern id="imagePattern" patternUnits="userSpaceOnUse" width="400" height="400">
        <image href="https://cornello.eu/graffiti.jpg" x="0" y="0" width="400" height="400" />
      </pattern>
      <filter id="glowFilter" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="8" result="blurred" />
        <feOffset in="blurred" dx="0" dy="0" result="offsetBlurred" />
        <feFlood flood-color="cyan" result="glowColor" />
        <feComposite in="glowColor" in2="offsetBlurred" operator="in" />
        <feMerge>
          <feMergeNode />
          <feMergeNode in="SourceGraphic" />
        </feMerge>
      </filter>
    </defs>
    <text id="animatedText" x="50" y="150"></text>
  </svg>

  <!-- Carousel avec cartes flip -->
  <div class="carousel-container">
    <div class="carousel">
      <!-- Chaque carte comporte désormais une structure avec .card-inner, .card-front et .card-back -->
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://www.bivea.fr/5104-home_default/baume-de-soin-des-pyrenees.jpg');"></div>
          <div class="card-back">
            <h2>Titre 1</h2>
            <p>Sous-titre 1</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/2.jpg');"></div>
          <div class="card-back">
            <h2>Titre 2</h2>
            <p>Sous-titre 2</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/3.jpg');"></div>
          <div class="card-back">
            <h2>Titre 3</h2>
            <p>Sous-titre 3</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/4.jpg');"></div>
          <div class="card-back">
            <h2>Titre 4</h2>
            <p>Sous-titre 4</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/5.jpg');"></div>
          <div class="card-back">
            <h2>Titre 5</h2>
            <p>Sous-titre 5</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/6.jpg');"></div>
          <div class="card-back">
            <h2>Titre 6</h2>
            <p>Sous-titre 6</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/7.jpg');"></div>
          <div class="card-back">
            <h2>Titre 7</h2>
            <p>Sous-titre 7</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/8.jpg');"></div>
          <div class="card-back">
            <h2>Titre 8</h2>
            <p>Sous-titre 8</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/9.jpg');"></div>
          <div class="card-back">
            <h2>Titre 9</h2>
            <p>Sous-titre 9</p>
          </div>
        </div>
      </div>
      <div class="card" onclick="flipCard(this)">
        <div class="card-inner">
          <div class="card-front" style="background-image: url('https://cornello.eu/10.jpg');"></div>
          <div class="card-back">
            <h2>Titre 10</h2>
            <p>Sous-titre 10</p>
          </div>
        </div>
      </div>
    </div>
    <button class="prev" onclick="moveCarousel(-1)">&#10094;</button>
    <button class="next" onclick="moveCarousel(1)">&#10095;</button>
  </div>

  <!-- Lightbox (conserve le code existant, utilisable si nécessaire) -->
  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="Large view" />
  </div>

  <script>
    // Animation du texte en SVG
    const textElement = document.getElementById("animatedText");

    function restartAnimation() {
      textElement.style.transition = "none";
      textElement.style.strokeDashoffset = "0";
      setTimeout(() => {
        textElement.style.transition = "stroke-dashoffset 3s ease";
        textElement.style.strokeDashoffset = "1000";
      }, 50);
    }

    restartAnimation();
    setInterval(restartAnimation, 10000);

    // Carousel et positionnement 3D
    let index = 0;
    const totalCards = 10;
    const carousel = document.querySelector(".carousel");
    const angleIncrement = 360 / totalCards;
    const distance = 350;

    // Positionne chaque carte dans l'espace 3D
    document.querySelectorAll(".card").forEach((card, i) => {
      card.style.transform = `rotateY(${i * angleIncrement}deg) translateZ(${distance}px)`;
    });

    function moveCarousel(direction) {
      index += direction;
      if (index < 0) index = totalCards - 1;
      if (index >= totalCards) index = 0;
      updateCarousel();
    }

    function updateCarousel() {
      const angle = -index * angleIncrement;
      carousel.style.transform = `rotateY(${angle}deg)`;
    }

    // Fonction pour l'effet flip sur une carte
    function flipCard(cardElement) {
      cardElement.classList.toggle('flipped');
    }

    // Fonctions lightbox (si besoin)
    function openLightbox(imageSrc) {
      const lightbox = document.getElementById("lightbox");
      const lightboxImage = document.getElementById("lightbox-img");
      lightboxImage.src = imageSrc;
      lightbox.style.display = "flex";
    }

    function closeLightbox() {
      const lightbox = document.getElementById("lightbox");
      lightbox.style.display = "none";
    }
  </script>
</body>
</html>
